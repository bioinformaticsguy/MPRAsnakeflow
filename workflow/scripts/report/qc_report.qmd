---
title: "QC Measures"
page-layout: full
format:
  html:
    code-fold: true
    code-tools: true
    embed-resources: true
    anchor-sections: true
    smooth-scroll: true
    toc: true
jupyter: python3
---

```{python}
#| echo: false
# Imports
from IPython.display import display, Image
from pathlib import Path
import importlib
import pandas as pd 
import os
import sys
 
## Testing Imports
import matplotlib.pyplot as plt
import numpy as np

## Constants
image_path = Path(os.getcwd()).parent
```

```{python}
#| echo: false
## Function Imports
cwd = Path.cwd()
while cwd.name != 'MPRAsnakeflow': cwd = cwd.parent
sys.path.insert(0, str(cwd))
from workflow.scripts.report.report_functions import get_unique_files, display_unique_images
```

```{python}
#| tags: [parameters]
#| echo: false
condition = "image.d"
typee = "typeee"

```

```{python}
#| echo: false
import yaml
import pprint

# Assuming `params` is your dictionary

with open('config.yml') as f:
    params = yaml.safe_load(f)

def get_config(params):
    return list(params["experiments"][project]["configs"].keys())[0]

def get_assignment(params):
    return list(params["experiments"][project]["assignments"].keys())[0]

# pprint.pprint(params)
```

```{python}
#| echo: false
## Generating the f strig elements.
config = get_config(params)
assignment = get_assignment(params)
```


# Pairwise
```{python}
#| echo: false
# assignment = "assignment"
full_path = str(image_path)  + f"/statistic/assigned_counts/{assignment}/{config}/{condition}_RNA_pairwise.png"
# print(f"statistic/assigned_counts/{assignment}/{config}/{condition}_RNA_pairwise.png")
display(Image(full_path))
```



# Per Barcode
```{python}
#| echo: false
full_path = str(image_path)  + f"/statistic/barcode/counts/{condition}_{config}_{'DNA'}_perBarcode.png"
display(Image(full_path))
```





<!-- # Barcode Corelation
## RNA
```{python}
#| echo: false
display_unique_images('**/*barcode_RNA_pairwise*.png', image_path)
```

## DNA
```{python}
#| echo: false
display_unique_images('**/*barcode_DNA_pairwise*.png', image_path)
```

## Ratio
```{python}
#| echo: false
display_unique_images('**/*barcode_Ratio_pairwise*.png', image_path)
```

# Per Bar Code
## DNA
```{python}
#| echo: false
display_unique_images('**/*DNA_perBarcode*.png', image_path)
```

## RNA
```{python}
#| echo: false
display_unique_images('**/*RNA_perBarcode*.png', image_path)
```

# Oligo Corelation
## DNA
```{python}
#| echo: false
display_unique_images('**/*DNA_pairwise.png', image_path, exclude='barcode')
```

### Minimum Threashold
```{python}
#| echo: false
display_unique_images('**/*DNA_pairwise_minThreshold.png', image_path, exclude='barcode')
```

## RNA
```{python}
#| echo: false
display_unique_images('**/*RNA_pairwise.png', image_path, exclude='barcode')
```

### Minimum Threashold
```{python}
#| echo: false
display_unique_images('**/*RNA_pairwise_minThreshold.png', image_path, exclude='barcode')
```

## Ratio
```{python}
#| echo: false
display_unique_images('**/*Ratio_pairwise.png', image_path, exclude='barcode')
```

### Minimum Threashold
```{python}
#| echo: false
display_unique_images('**/*Ratio_pairwise_minThreshold.png', image_path, exclude='barcode')
```

# Barcodes Per Insert
```{python}
#| echo: false
display_unique_images('**/*barcodesPerInsert.png', image_path)
```

# Oligo Correlation
```{python}
#| echo: false
tsv_files = list(image_path.glob('**/*fromFile_exampleConfig.tsv'))
# print(tsv_files)
if len(tsv_files) > 0:

  df = pd.read_csv(tsv_files[0], sep='\t')
  df
```

 -->
